function initAnchors(){new SmoothScroll({anchorLinks:".btn-back",extraOffset:0,wheelBehavior:"none"})}jQuery(function(){initAnchors()}),function(l,t){var e,s,r,h=l(window),a="onwheel"in document||9<=document.documentMode?"wheel":"mousewheel DOMMouseScroll";function i(t,o,n){var i;document.body&&(o="number"==typeof o?{duration:o}:o||{},e=e||l("html, body"),i=o.container||e,"number"==typeof t&&(t={top:t}),s&&r&&s.off(a,r),o.wheelBehavior&&"none"!==o.wheelBehavior&&(r=function(t){"stop"===o.wheelBehavior?(i.off(a,r),i.stop()):"ignore"===o.wheelBehavior&&t.preventDefault()},s=i.on(a,r)),i.stop().animate({scrollLeft:t.left,scrollTop:t.top},o.duration,function(){r&&i.off(a,r),l.isFunction(n)&&n()}))}function o(t){this.options=l.extend({anchorLinks:'a[href^="#"]',container:null,extraOffset:null,activeClasses:null,easing:"swing",animMode:"duration",animDuration:800,animSpeed:1500,anchorActiveClass:"anchor-active",sectionActiveClass:"section-active",wheelBehavior:"stop",useNativeAnchorScrolling:!1},t),this.init()}o.prototype={init:function(){this.initStructure(),this.attachEvents(),this.isInit=!0},initStructure:function(){var t=this;this.container=this.options.container?l(this.options.container):l("html,body"),this.scrollContainer=this.options.container?this.container:h,this.anchorLinks=jQuery(this.options.anchorLinks).filter(function(){return jQuery(t.getAnchorTarget(jQuery(this))).length})},getId:function(t){try{return"#"+t.replace(/^.*?(#|$)/,"")}catch(t){return null}},getAnchorTarget:function(t){var o=this.getId(l(t).attr("href"));return l(1<o.length?o:"html")},getTargetOffset:function(t){var o=t.offset().top;return this.options.container&&(o-=this.container.offset().top-this.container.prop("scrollTop")),"number"==typeof this.options.extraOffset?o-=this.options.extraOffset:"function"==typeof this.options.extraOffset&&(o-=this.options.extraOffset(t)),{top:o}},attachEvents:function(){var o=this;if(this.options.activeClasses&&this.anchorLinks.length){this.anchorData=[];for(var t=0;t<this.anchorLinks.length;t++){var n=jQuery(this.anchorLinks[t]),i=o.getAnchorTarget(n),e=null;l.each(o.anchorData,function(t,o){o.block[0]===i[0]&&(e=o)}),e?e.link=e.link.add(n):o.anchorData.push({link:n,block:i})}this.resizeHandler=function(){o.isInit&&o.recalculateOffsets()},this.scrollHandler=function(){o.refreshActiveClass()},this.recalculateOffsets(),this.scrollContainer.on("scroll",this.scrollHandler),h.on("resize load orientationchange refreshAnchor",this.resizeHandler)}this.clickHandler=function(t){o.onClick(t)},this.options.useNativeAnchorScrolling||this.anchorLinks.on("click",this.clickHandler)},recalculateOffsets:function(){var n=this;l.each(this.anchorData,function(t,o){o.offset=n.getTargetOffset(o.block),o.height=o.block.outerHeight()}),this.refreshActiveClass()},toggleActiveClass:function(t,o,n){t.toggleClass(this.options.anchorActiveClass,n),o.toggleClass(this.options.sectionActiveClass,n)},refreshActiveClass:function(){var e=this,s=!1,r=this.container.prop("scrollHeight"),a=this.scrollContainer.height(),c=this.options.container?this.container.prop("scrollTop"):h.scrollTop();this.options.customScrollHandler?this.options.customScrollHandler.call(this,c,this.anchorData):(this.anchorData.sort(function(t,o){return t.offset.top-o.offset.top}),l.each(this.anchorData,function(t){var o=e.anchorData.length-t-1,n=e.anchorData[o],i="parent"===e.options.activeClasses?n.link.parent():n.link;r-a<=c?o===e.anchorData.length-1?e.toggleActiveClass(i,n.block,!0):e.toggleActiveClass(i,n.block,!1):!s&&(c>=n.offset.top-1||0===o)?(s=!0,e.toggleActiveClass(i,n.block,!0)):e.toggleActiveClass(i,n.block,!1)}))},calculateScrollDuration:function(t){return"speed"===this.options.animMode?Math.abs(this.scrollContainer.scrollTop()-t.top)/this.options.animSpeed*1e3:this.options.animDuration},onClick:function(t){var o=this.getAnchorTarget(t.currentTarget),n=this.getTargetOffset(o);t.preventDefault(),i(n,{container:this.container,wheelBehavior:this.options.wheelBehavior,duration:this.calculateScrollDuration(n)}),this.makeCallback("onBeforeScroll",t.currentTarget)},makeCallback:function(t){if("function"==typeof this.options[t]){var o=Array.prototype.slice.call(arguments);o.shift(),this.options[t].apply(this,o)}},destroy:function(){var e=this;this.isInit=!1,this.options.activeClasses&&(h.off("resize load orientationchange refreshAnchor",this.resizeHandler),this.scrollContainer.off("scroll",this.scrollHandler),l.each(this.anchorData,function(t){var o=e.anchorData.length-t-1,n=e.anchorData[o],i="parent"===e.options.activeClasses?n.link.parent():n.link;e.toggleActiveClass(i,n.block,!1)})),this.anchorLinks.off("click",this.clickHandler)}},l.extend(o,{scrollTo:function(t,o,n){i(t,o,n)}}),t.SmoothScroll=o}(jQuery,this),$(function(){$(".nav-opener").on("click",function(t){t.preventDefault(),$("body").toggleClass("nav-active")})}),$(function(){var t=$("body");$(window).scroll(function(){0<$(window).scrollTop()?t.addClass("scroll"):t.removeClass("scroll")})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaW5pdEFuY2hvcnMiLCJTbW9vdGhTY3JvbGwiLCJhbmNob3JMaW5rcyIsImV4dHJhT2Zmc2V0Iiwid2hlZWxCZWhhdmlvciIsImpRdWVyeSIsIiQiLCJleHBvcnRzIiwicGFnZSIsImFjdGl2ZUJsb2NrIiwiYWN0aXZlV2hlZWxIYW5kbGVyIiwid2luIiwid2luZG93Iiwid2hlZWxFdmVudHMiLCJkb2N1bWVudCIsImRvY3VtZW50TW9kZSIsInNjcm9sbFRvIiwib2Zmc2V0Iiwib3B0aW9ucyIsImNhbGxiYWNrIiwic2Nyb2xsQmxvY2siLCJib2R5IiwiZHVyYXRpb24iLCJjb250YWluZXIiLCJ0b3AiLCJvZmYiLCJlIiwic3RvcCIsInByZXZlbnREZWZhdWx0Iiwib24iLCJhbmltYXRlIiwic2Nyb2xsTGVmdCIsImxlZnQiLCJzY3JvbGxUb3AiLCJpc0Z1bmN0aW9uIiwidGhpcyIsImV4dGVuZCIsImFjdGl2ZUNsYXNzZXMiLCJlYXNpbmciLCJhbmltTW9kZSIsImFuaW1EdXJhdGlvbiIsImFuaW1TcGVlZCIsImFuY2hvckFjdGl2ZUNsYXNzIiwic2VjdGlvbkFjdGl2ZUNsYXNzIiwidXNlTmF0aXZlQW5jaG9yU2Nyb2xsaW5nIiwiaW5pdCIsInByb3RvdHlwZSIsImluaXRTdHJ1Y3R1cmUiLCJhdHRhY2hFdmVudHMiLCJpc0luaXQiLCJzZWxmIiwic2Nyb2xsQ29udGFpbmVyIiwiZmlsdGVyIiwiZ2V0QW5jaG9yVGFyZ2V0IiwibGVuZ3RoIiwiZ2V0SWQiLCJzdHIiLCJyZXBsYWNlIiwiZXJyIiwibGluayIsInRhcmdldElkIiwiYXR0ciIsImdldFRhcmdldE9mZnNldCIsImJsb2NrIiwiYmxvY2tPZmZzZXQiLCJwcm9wIiwiYW5jaG9yRGF0YSIsImkiLCJ0YXJnZXRCbG9jayIsImFuY2hvckRhdGFJdGVtIiwiZWFjaCIsImluZGV4IiwiaXRlbSIsImFkZCIsInB1c2giLCJyZXNpemVIYW5kbGVyIiwicmVjYWxjdWxhdGVPZmZzZXRzIiwic2Nyb2xsSGFuZGxlciIsInJlZnJlc2hBY3RpdmVDbGFzcyIsImNsaWNrSGFuZGxlciIsIm9uQ2xpY2siLCJkYXRhIiwiaGVpZ2h0Iiwib3V0ZXJIZWlnaHQiLCJ0b2dnbGVBY3RpdmVDbGFzcyIsImFuY2hvciIsInN0YXRlIiwidG9nZ2xlQ2xhc3MiLCJmb3VuZEZsYWciLCJjb250YWluZXJIZWlnaHQiLCJ2aWV3UG9ydEhlaWdodCIsImN1c3RvbVNjcm9sbEhhbmRsZXIiLCJjYWxsIiwic29ydCIsImEiLCJiIiwicmV2ZXJzZUluZGV4IiwiYW5jaG9yRWxlbWVudCIsInBhcmVudCIsImNhbGN1bGF0ZVNjcm9sbER1cmF0aW9uIiwiTWF0aCIsImFicyIsImN1cnJlbnRUYXJnZXQiLCJ0YXJnZXRPZmZzZXQiLCJtYWtlQ2FsbGJhY2siLCJuYW1lIiwiYXJncyIsIkFycmF5Iiwic2xpY2UiLCJhcmd1bWVudHMiLCJzaGlmdCIsImFwcGx5IiwiZGVzdHJveSIsImJsb2NrT3JPZmZzZXQiLCJkdXJhdGlvbk9yT3B0aW9ucyIsImhlYWRlciIsInNjcm9sbCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiXSwibWFwcGluZ3MiOiJBQU1BLFNBQVNBLGNBQ1IsSUFBSUMsYUFBYSxDQUVoQkMsWUFBYSxZQUNiQyxZQUFhLEVBQ2JDLGNBQWUsU0FYakJDLE9BQU8sV0FDTkwsZ0JBa0JDLFNBQVNNLEVBQUdDLEdBRWIsSUFBSUMsRUFFSEMsRUFBYUMsRUFEYkMsRUFBTUwsRUFBRU0sUUFFUkMsRUFBZSxZQUFhQyxVQUFxQyxHQUF6QkEsU0FBU0MsYUFBb0IsUUFBVSw0QkFHaEYsU0FBU0MsRUFBU0MsRUFBUUMsRUFBU0MsR0FFbEMsSUFBSUMsRUFDQU4sU0FBU08sT0FFWEgsRUFEc0IsaUJBQVpBLEVBQ0EsQ0FDVEksU0FBVUosR0FHREEsR0FBVyxHQUV0QlYsRUFBT0EsR0FBUUYsRUFBRSxjQUNqQmMsRUFBY0YsRUFBUUssV0FBYWYsRUFNZCxpQkFBWFMsSUFDVkEsRUFBUyxDQUNSTyxJQUFL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bnQiOlsialF1ZXJ5KGZ1bmN0aW9uKCkge1xuXHRpbml0QW5jaG9ycygpO1xufSk7XG5cblxuLy8gaW5pdGlhbGl6ZSBzbW9vdGggYW5jaG9yIGxpbmtzXG5mdW5jdGlvbiBpbml0QW5jaG9ycygpIHtcblx0bmV3IFNtb290aFNjcm9sbCh7XG5cdFx0Ly8gYW5jaG9yTGlua3M6ICdhW2hyZWZePVwiI1wiXTpub3QoW2hyZWY9XCIjXCJdKScsXG5cdFx0YW5jaG9yTGlua3M6ICcuYnRuLWJhY2snICxcblx0XHRleHRyYU9mZnNldDogMCxcblx0XHR3aGVlbEJlaGF2aW9yOiAnbm9uZSdcblx0fSk7XG59XG5cblxuLyohXG4gKiBTbW9vdGhTY3JvbGwgbW9kdWxlXG4gKi9cbjsoZnVuY3Rpb24oJCwgZXhwb3J0cykge1xuXHQvLyBwcml2YXRlIHZhcmlhYmxlc1xuXHR2YXIgcGFnZSxcblx0XHR3aW4gPSAkKHdpbmRvdyksXG5cdFx0YWN0aXZlQmxvY2ssIGFjdGl2ZVdoZWVsSGFuZGxlcixcblx0XHR3aGVlbEV2ZW50cyA9ICgnb253aGVlbCcgaW4gZG9jdW1lbnQgfHwgZG9jdW1lbnQuZG9jdW1lbnRNb2RlID49IDkgPyAnd2hlZWwnIDogJ21vdXNld2hlZWwgRE9NTW91c2VTY3JvbGwnKTtcblxuXHQvLyBhbmltYXRpb24gaGFuZGxlcnNcblx0ZnVuY3Rpb24gc2Nyb2xsVG8ob2Zmc2V0LCBvcHRpb25zLCBjYWxsYmFjaykge1xuXHRcdC8vIGluaXRpYWxpemUgdmFyaWFibGVzXG5cdFx0dmFyIHNjcm9sbEJsb2NrO1xuXHRcdGlmIChkb2N1bWVudC5ib2R5KSB7XG5cdFx0XHRpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdG9wdGlvbnMgPSB7XG5cdFx0XHRcdFx0ZHVyYXRpb246IG9wdGlvbnNcblx0XHRcdFx0fTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHRcdFx0fVxuXHRcdFx0cGFnZSA9IHBhZ2UgfHwgJCgnaHRtbCwgYm9keScpO1xuXHRcdFx0c2Nyb2xsQmxvY2sgPSBvcHRpb25zLmNvbnRhaW5lciB8fCBwYWdlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gdHJlYXQgc2luZ2xlIG51bWJlciBhcyBzY3JvbGxUb3Bcblx0XHRpZiAodHlwZW9mIG9mZnNldCA9PT0gJ251bWJlcicpIHtcblx0XHRcdG9mZnNldCA9IHtcblx0XHRcdFx0dG9wOiBvZmZzZXRcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0Ly8gaGFuZGxlIG1vdXNld2hlZWwvdHJhY2twYWQgd2hpbGUgYW5pbWF0aW9uIGlzIGFjdGl2ZVxuXHRcdGlmIChhY3RpdmVCbG9jayAmJiBhY3RpdmVXaGVlbEhhbmRsZXIpIHtcblx0XHRcdGFjdGl2ZUJsb2NrLm9mZih3aGVlbEV2ZW50cywgYWN0aXZlV2hlZWxIYW5kbGVyKTtcblx0XHR9XG5cdFx0aWYgKG9wdGlvbnMud2hlZWxCZWhhdmlvciAmJiBvcHRpb25zLndoZWVsQmVoYXZpb3IgIT09ICdub25lJykge1xuXHRcdFx0YWN0aXZlV2hlZWxIYW5kbGVyID0gZnVuY3Rpb24oZSkge1xuXHRcdFx0XHRpZiAob3B0aW9ucy53aGVlbEJlaGF2aW9yID09PSAnc3RvcCcpIHtcblx0XHRcdFx0XHRzY3JvbGxCbG9jay5vZmYod2hlZWxFdmVudHMsIGFjdGl2ZVdoZWVsSGFuZGxlcik7XG5cdFx0XHRcdFx0c2Nyb2xsQmxvY2suc3RvcCgpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKG9wdGlvbnMud2hlZWxCZWhhdmlvciA9PT0gJ2lnbm9yZScpIHtcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRhY3RpdmVCbG9jayA9IHNjcm9sbEJsb2NrLm9uKHdoZWVsRXZlbnRzLCBhY3RpdmVXaGVlbEhhbmRsZXIpO1xuXHRcdH1cblxuXHRcdC8vIHN0YXJ0IHNjcm9sbGluZyBhbmltYXRpb25cblx0XHRzY3JvbGxCbG9jay5zdG9wKCkuYW5pbWF0ZSh7XG5cdFx0XHRzY3JvbGxMZWZ0OiBvZmZzZXQubGVmdCxcblx0XHRcdHNjcm9sbFRvcDogb2Zmc2V0LnRvcFxuXHRcdH0sIG9wdGlvbnMuZHVyYXRpb24sIGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKGFjdGl2ZVdoZWVsSGFuZGxlcikge1xuXHRcdFx0XHRzY3JvbGxCbG9jay5vZmYod2hlZWxFdmVudHMsIGFjdGl2ZVdoZWVsSGFuZGxlcik7XG5cdFx0XHR9XG5cdFx0XHRpZiAoJC5pc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuXHRcdFx0XHRjYWxsYmFjaygpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly8gc21vb3RoIHNjcm9sbCBjb250c3RydWN0b3Jcblx0ZnVuY3Rpb24gU21vb3RoU2Nyb2xsKG9wdGlvbnMpIHtcblx0XHR0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7XG5cdFx0XHRhbmNob3JMaW5rczogJ2FbaHJlZl49XCIjXCJdJywgLy8gc2VsZWN0b3Igb3IgalF1ZXJ5IG9iamVjdFxuXHRcdFx0Y29udGFpbmVyOiBudWxsLCAvLyBzcGVjaWZ5IGNvbnRhaW5lciBmb3Igc2Nyb2xsaW5nIChkZWZhdWx0IC0gd2hvbGUgcGFnZSlcblx0XHRcdGV4dHJhT2Zmc2V0OiBudWxsLCAvLyBmdW5jdGlvbiBvciBmaXhlZCBudW1iZXJcblx0XHRcdGFjdGl2ZUNsYXNzZXM6IG51bGwsIC8vIG51bGwsIFwibGlua1wiLCBcInBhcmVudFwiXG5cdFx0XHRlYXNpbmc6ICdzd2luZycsIC8vIGVhc2luZyBvZiBzY3JvbGxpbmdcblx0XHRcdGFuaW1Nb2RlOiAnZHVyYXRpb24nLCAvLyBvciBcInNwZWVkXCIgbW9kZVxuXHRcdFx0YW5pbUR1cmF0aW9uOiA4MDAsIC8vIHRvdGFsIGR1cmF0aW9uIGZvciBzY3JvbGwgKGFueSBkaXN0YW5jZSlcblx0XHRcdGFuaW1TcGVlZDogMTUwMCwgLy8gcGl4ZWxzIHBlciBzZWNvbmRcblx0XHRcdGFuY2hvckFjdGl2ZUNsYXNzOiAnYW5jaG9yLWFjdGl2ZScsXG5cdFx0XHRzZWN0aW9uQWN0aXZlQ2xhc3M6ICdzZWN0aW9uLWFjdGl2ZScsXG5cdFx0XHR3aGVlbEJlaGF2aW9yOiAnc3RvcCcsIC8vIFwic3RvcFwiLCBcImlnbm9yZVwiIG9yIFwibm9uZVwiXG5cdFx0XHR1c2VOYXRpdmVBbmNob3JTY3JvbGxpbmc6IGZhbHNlIC8vIGRvIG5vdCBoYW5kbGUgY2xpY2sgaW4gZGV2aWNlcyB3aXRoIG5hdGl2ZSBzbW9vdGggc2Nyb2xsaW5nXG5cdFx0fSwgb3B0aW9ucyk7XG5cdFx0dGhpcy5pbml0KCk7XG5cdH1cblx0U21vb3RoU2Nyb2xsLnByb3RvdHlwZSA9IHtcblx0XHRpbml0OiBmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuaW5pdFN0cnVjdHVyZSgpO1xuXHRcdFx0dGhpcy5hdHRhY2hFdmVudHMoKTtcblx0XHRcdHRoaXMuaXNJbml0ID0gdHJ1ZTtcblx0XHR9LFxuXHRcdGluaXRTdHJ1Y3R1cmU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHR0aGlzLmNvbnRhaW5lciA9IHRoaXMub3B0aW9ucy5jb250YWluZXIgPyAkKHRoaXMub3B0aW9ucy5jb250YWluZXIpIDogJCgnaHRtbCxib2R5Jyk7XG5cdFx0XHR0aGlzLnNjcm9sbENvbnRhaW5lciA9IHRoaXMub3B0aW9ucy5jb250YWluZXIgPyB0aGlzLmNvbnRhaW5lciA6IHdpbjtcblx0XHRcdHRoaXMuYW5jaG9yTGlua3MgPSBqUXVlcnkodGhpcy5vcHRpb25zLmFuY2hvckxpbmtzKS5maWx0ZXIoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiBqUXVlcnkoc2VsZi5nZXRBbmNob3JUYXJnZXQoalF1ZXJ5KHRoaXMpKSkubGVuZ3RoO1xuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRnZXRJZDogZnVuY3Rpb24oc3RyKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRyZXR1cm4gJyMnICsgc3RyLnJlcGxhY2UoL14uKj8oI3wkKS8sICcnKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblx0XHR9LFxuXHRcdGdldEFuY2hvclRhcmdldDogZnVuY3Rpb24obGluaykge1xuXHRcdFx0Ly8gZ2V0IHRhcmdldCBibG9jayBmcm9tIGxpbmsgaHJlZlxuXHRcdFx0dmFyIHRhcmdldElkID0gdGhpcy5nZXRJZCgkKGxpbmspLmF0dHIoJ2hyZWYnKSk7XG5cdFx0XHRyZXR1cm4gJCh0YXJnZXRJZC5sZW5ndGggPiAxID8gdGFyZ2V0SWQgOiAnaHRtbCcpO1xuXHRcdH0sXG5cdFx0Z2V0VGFyZ2V0T2Zmc2V0OiBmdW5jdGlvbihibG9jaykge1xuXHRcdFx0Ly8gZ2V0IHRhcmdldCBvZmZzZXRcblx0XHRcdHZhciBibG9ja09mZnNldCA9IGJsb2NrLm9mZnNldCgpLnRvcDtcblx0XHRcdGlmICh0aGlzLm9wdGlvbnMuY29udGFpbmVyKSB7XG5cdFx0XHRcdGJsb2NrT2Zmc2V0IC09IHRoaXMuY29udGFpbmVyLm9mZnNldCgpLnRvcCAtIHRoaXMuY29udGFpbmVyLnByb3AoJ3Njcm9sbFRvcCcpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBoYW5kbGUgZXh0cmEgb2Zmc2V0XG5cdFx0XHRpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5leHRyYU9mZnNldCA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0YmxvY2tPZmZzZXQgLT0gdGhpcy5vcHRpb25zLmV4dHJhT2Zmc2V0O1xuXHRcdFx0fSBlbHNlIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLmV4dHJhT2Zmc2V0ID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdGJsb2NrT2Zmc2V0IC09IHRoaXMub3B0aW9ucy5leHRyYU9mZnNldChibG9jayk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR0b3A6IGJsb2NrT2Zmc2V0XG5cdFx0XHR9O1xuXHRcdH0sXG5cdFx0YXR0YWNoRXZlbnRzOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0Ly8gaGFuZGxlIGFjdGl2ZSBjbGFzc2VzXG5cdFx0XHRpZiAodGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzZXMgJiYgdGhpcy5hbmNob3JMaW5rcy5sZW5ndGgpIHtcblx0XHRcdFx0Ly8gY2FjaGUgc3RydWN0dXJlXG5cdFx0XHRcdHRoaXMuYW5jaG9yRGF0YSA9IFtdO1xuXG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5hbmNob3JMaW5rcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdHZhciBsaW5rID0galF1ZXJ5KHRoaXMuYW5jaG9yTGlua3NbaV0pLFxuXHRcdFx0XHRcdFx0dGFyZ2V0QmxvY2sgPSBzZWxmLmdldEFuY2hvclRhcmdldChsaW5rKSxcblx0XHRcdFx0XHRcdGFuY2hvckRhdGFJdGVtID0gbnVsbDtcblxuXHRcdFx0XHRcdCQuZWFjaChzZWxmLmFuY2hvckRhdGEsIGZ1bmN0aW9uKGluZGV4LCBpdGVtKSB7XG5cdFx0XHRcdFx0XHRpZiAoaXRlbS5ibG9ja1swXSA9PT0gdGFyZ2V0QmxvY2tbMF0pIHtcblx0XHRcdFx0XHRcdFx0YW5jaG9yRGF0YUl0ZW0gPSBpdGVtO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0aWYgKGFuY2hvckRhdGFJdGVtKSB7XG5cdFx0XHRcdFx0XHRhbmNob3JEYXRhSXRlbS5saW5rID0gYW5jaG9yRGF0YUl0ZW0ubGluay5hZGQobGluayk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHNlbGYuYW5jaG9yRGF0YS5wdXNoKHtcblx0XHRcdFx0XHRcdFx0bGluazogbGluayxcblx0XHRcdFx0XHRcdFx0YmxvY2s6IHRhcmdldEJsb2NrXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0Ly8gYWRkIGFkZGl0aW9uYWwgZXZlbnQgaGFuZGxlcnNcblx0XHRcdFx0dGhpcy5yZXNpemVIYW5kbGVyID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKCFzZWxmLmlzSW5pdCkgcmV0dXJuO1xuXHRcdFx0XHRcdHNlbGYucmVjYWxjdWxhdGVPZmZzZXRzKCk7XG5cdFx0XHRcdH07XG5cdFx0XHRcdHRoaXMuc2Nyb2xsSGFuZGxlciA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHNlbGYucmVmcmVzaEFjdGl2ZUNsYXNzKCk7XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0dGhpcy5yZWNhbGN1bGF0ZU9mZnNldHMoKTtcblx0XHRcdFx0dGhpcy5zY3JvbGxDb250YWluZXIub24oJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsSGFuZGxlcik7XG5cdFx0XHRcdHdpbi5vbigncmVzaXplIGxvYWQgb3JpZW50YXRpb25jaGFuZ2UgcmVmcmVzaEFuY2hvcicsIHRoaXMucmVzaXplSGFuZGxlcik7XG5cdFx0XHR9XG5cblx0XHRcdC8vIGhhbmRsZSBjbGljayBldmVudFxuXHRcdFx0dGhpcy5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbihlKSB7XG5cdFx0XHRcdHNlbGYub25DbGljayhlKTtcblx0XHRcdH07XG5cdFx0XHRpZiAoIXRoaXMub3B0aW9ucy51c2VOYXRpdmVBbmNob3JTY3JvbGxpbmcpIHtcblx0XHRcdFx0dGhpcy5hbmNob3JMaW5rcy5vbignY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlcik7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRyZWNhbGN1bGF0ZU9mZnNldHM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0JC5lYWNoKHRoaXMuYW5jaG9yRGF0YSwgZnVuY3Rpb24oaW5kZXgsIGRhdGEpIHtcblx0XHRcdFx0ZGF0YS5vZmZzZXQgPSBzZWxmLmdldFRhcmdldE9mZnNldChkYXRhLmJsb2NrKTtcblx0XHRcdFx0ZGF0YS5oZWlnaHQgPSBkYXRhLmJsb2NrLm91dGVySGVpZ2h0KCk7XG5cdFx0XHR9KTtcblx0XHRcdHRoaXMucmVmcmVzaEFjdGl2ZUNsYXNzKCk7XG5cdFx0fSxcblx0XHR0b2dnbGVBY3RpdmVDbGFzczogZnVuY3Rpb24oYW5jaG9yLCBibG9jaywgc3RhdGUpIHtcblx0XHRcdGFuY2hvci50b2dnbGVDbGFzcyh0aGlzLm9wdGlvbnMuYW5jaG9yQWN0aXZlQ2xhc3MsIHN0YXRlKTtcblx0XHRcdGJsb2NrLnRvZ2dsZUNsYXNzKHRoaXMub3B0aW9ucy5zZWN0aW9uQWN0aXZlQ2xhc3MsIHN0YXRlKTtcblx0XHR9LFxuXHRcdHJlZnJlc2hBY3RpdmVDbGFzczogZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHRcdGZvdW5kRmxhZyA9IGZhbHNlLFxuXHRcdFx0XHRjb250YWluZXJIZWlnaHQgPSB0aGlzLmNvbnRhaW5lci5wcm9wKCdzY3JvbGxIZWlnaHQnKSxcblx0XHRcdFx0dmlld1BvcnRIZWlnaHQgPSB0aGlzLnNjcm9sbENvbnRhaW5lci5oZWlnaHQoKSxcblx0XHRcdFx0c2Nyb2xsVG9wID0gdGhpcy5vcHRpb25zLmNvbnRhaW5lciA/IHRoaXMuY29udGFpbmVyLnByb3AoJ3Njcm9sbFRvcCcpIDogd2luLnNjcm9sbFRvcCgpO1xuXG5cdFx0XHQvLyB1c2VyIGZ1bmN0aW9uIGluc3RlYWQgb2YgZGVmYXVsdCBoYW5kbGVyXG5cdFx0XHRpZiAodGhpcy5vcHRpb25zLmN1c3RvbVNjcm9sbEhhbmRsZXIpIHtcblx0XHRcdFx0dGhpcy5vcHRpb25zLmN1c3RvbVNjcm9sbEhhbmRsZXIuY2FsbCh0aGlzLCBzY3JvbGxUb3AsIHRoaXMuYW5jaG9yRGF0YSk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gc29ydCBhbmNob3IgZGF0YSBieSBvZmZzZXRzXG5cdFx0XHR0aGlzLmFuY2hvckRhdGEuc29ydChmdW5jdGlvbihhLCBiKSB7XG5cdFx0XHRcdHJldHVybiBhLm9mZnNldC50b3AgLSBiLm9mZnNldC50b3A7XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gZGVmYXVsdCBhY3RpdmUgY2xhc3MgaGFuZGxlclxuXHRcdFx0JC5lYWNoKHRoaXMuYW5jaG9yRGF0YSwgZnVuY3Rpb24oaW5kZXgpIHtcblx0XHRcdFx0dmFyIHJldmVyc2VJbmRleCA9IHNlbGYuYW5jaG9yRGF0YS5sZW5ndGggLSBpbmRleCAtIDEsXG5cdFx0XHRcdFx0ZGF0YSA9IHNlbGYuYW5jaG9yRGF0YVtyZXZlcnNlSW5kZXhdLFxuXHRcdFx0XHRcdGFuY2hvckVsZW1lbnQgPSAoc2VsZi5vcHRpb25zLmFjdGl2ZUNsYXNzZXMgPT09ICdwYXJlbnQnID8gZGF0YS5saW5rLnBhcmVudCgpIDogZGF0YS5saW5rKTtcblxuXHRcdFx0XHRpZiAoc2Nyb2xsVG9wID49IGNvbnRhaW5lckhlaWdodCAtIHZpZXdQb3J0SGVpZ2h0KSB7XG5cdFx0XHRcdFx0Ly8gaGFuZGxlIGxhc3Qgc2VjdGlvblxuXHRcdFx0XHRcdGlmIChyZXZlcnNlSW5kZXggPT09IHNlbGYuYW5jaG9yRGF0YS5sZW5ndGggLSAxKSB7XG5cdFx0XHRcdFx0XHRzZWxmLnRvZ2dsZUFjdGl2ZUNsYXNzKGFuY2hvckVsZW1lbnQsIGRhdGEuYmxvY2ssIHRydWUpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRzZWxmLnRvZ2dsZUFjdGl2ZUNsYXNzKGFuY2hvckVsZW1lbnQsIGRhdGEuYmxvY2ssIGZhbHNlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gaGFuZGxlIG90aGVyIHNlY3Rpb25zXG5cdFx0XHRcdFx0aWYgKCFmb3VuZEZsYWcgJiYgKHNjcm9sbFRvcCA+PSBkYXRhLm9mZnNldC50b3AgLSAxIHx8IHJldmVyc2VJbmRleCA9PT0gMCkpIHtcblx0XHRcdFx0XHRcdGZvdW5kRmxhZyA9IHRydWU7XG5cdFx0XHRcdFx0XHRzZWxmLnRvZ2dsZUFjdGl2ZUNsYXNzKGFuY2hvckVsZW1lbnQsIGRhdGEuYmxvY2ssIHRydWUpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRzZWxmLnRvZ2dsZUFjdGl2ZUNsYXNzKGFuY2hvckVsZW1lbnQsIGRhdGEuYmxvY2ssIGZhbHNlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0Y2FsY3VsYXRlU2Nyb2xsRHVyYXRpb246IGZ1bmN0aW9uKG9mZnNldCkge1xuXHRcdFx0dmFyIGRpc3RhbmNlO1xuXHRcdFx0aWYgKHRoaXMub3B0aW9ucy5hbmltTW9kZSA9PT0gJ3NwZWVkJykge1xuXHRcdFx0XHRkaXN0YW5jZSA9IE1hdGguYWJzKHRoaXMuc2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCgpIC0gb2Zmc2V0LnRvcCk7XG5cdFx0XHRcdHJldHVybiAoZGlzdGFuY2UgLyB0aGlzLm9wdGlvbnMuYW5pbVNwZWVkKSAqIDEwMDA7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5vcHRpb25zLmFuaW1EdXJhdGlvbjtcblx0XHRcdH1cblx0XHR9LFxuXHRcdG9uQ2xpY2s6IGZ1bmN0aW9uKGUpIHtcblx0XHRcdHZhciB0YXJnZXRCbG9jayA9IHRoaXMuZ2V0QW5jaG9yVGFyZ2V0KGUuY3VycmVudFRhcmdldCksXG5cdFx0XHRcdHRhcmdldE9mZnNldCA9IHRoaXMuZ2V0VGFyZ2V0T2Zmc2V0KHRhcmdldEJsb2NrKTtcblxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0c2Nyb2xsVG8odGFyZ2V0T2Zmc2V0LCB7XG5cdFx0XHRcdGNvbnRhaW5lcjogdGhpcy5jb250YWluZXIsXG5cdFx0XHRcdHdoZWVsQmVoYXZpb3I6IHRoaXMub3B0aW9ucy53aGVlbEJlaGF2aW9yLFxuXHRcdFx0XHRkdXJhdGlvbjogdGhpcy5jYWxjdWxhdGVTY3JvbGxEdXJhdGlvbih0YXJnZXRPZmZzZXQpXG5cdFx0XHR9KTtcblx0XHRcdHRoaXMubWFrZUNhbGxiYWNrKCdvbkJlZm9yZVNjcm9sbCcsIGUuY3VycmVudFRhcmdldCk7XG5cdFx0fSxcblx0XHRtYWtlQ2FsbGJhY2s6IGZ1bmN0aW9uKG5hbWUpIHtcblx0XHRcdGlmICh0eXBlb2YgdGhpcy5vcHRpb25zW25hbWVdID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcblx0XHRcdFx0YXJncy5zaGlmdCgpO1xuXHRcdFx0XHR0aGlzLm9wdGlvbnNbbmFtZV0uYXBwbHkodGhpcywgYXJncyk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRkZXN0cm95OiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0dGhpcy5pc0luaXQgPSBmYWxzZTtcblx0XHRcdGlmICh0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3Nlcykge1xuXHRcdFx0XHR3aW4ub2ZmKCdyZXNpemUgbG9hZCBvcmllbnRhdGlvbmNoYW5nZSByZWZyZXNoQW5jaG9yJywgdGhpcy5yZXNpemVIYW5kbGVyKTtcblx0XHRcdFx0dGhpcy5zY3JvbGxDb250YWluZXIub2ZmKCdzY3JvbGwnLCB0aGlzLnNjcm9sbEhhbmRsZXIpO1xuXHRcdFx0XHQkLmVhY2godGhpcy5hbmNob3JEYXRhLCBmdW5jdGlvbihpbmRleCkge1xuXHRcdFx0XHRcdHZhciByZXZlcnNlSW5kZXggPSBzZWxmLmFuY2hvckRhdGEubGVuZ3RoIC0gaW5kZXggLSAxLFxuXHRcdFx0XHRcdFx0ZGF0YSA9IHNlbGYuYW5jaG9yRGF0YVtyZXZlcnNlSW5kZXhdLFxuXHRcdFx0XHRcdFx0YW5jaG9yRWxlbWVudCA9IChzZWxmLm9wdGlvbnMuYWN0aXZlQ2xhc3NlcyA9PT0gJ3BhcmVudCcgPyBkYXRhLmxpbmsucGFyZW50KCkgOiBkYXRhLmxpbmspO1xuXG5cdFx0XHRcdFx0c2VsZi50b2dnbGVBY3RpdmVDbGFzcyhhbmNob3JFbGVtZW50LCBkYXRhLmJsb2NrLCBmYWxzZSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5hbmNob3JMaW5rcy5vZmYoJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIpO1xuXHRcdH1cblx0fTtcblxuXHQvLyBwdWJsaWMgQVBJXG5cdCQuZXh0ZW5kKFNtb290aFNjcm9sbCwge1xuXHRcdHNjcm9sbFRvOiBmdW5jdGlvbihibG9ja09yT2Zmc2V0LCBkdXJhdGlvbk9yT3B0aW9ucywgY2FsbGJhY2spIHtcblx0XHRcdHNjcm9sbFRvKGJsb2NrT3JPZmZzZXQsIGR1cmF0aW9uT3JPcHRpb25zLCBjYWxsYmFjayk7XG5cdFx0fVxuXHR9KTtcblxuXHQvLyBleHBvcnQgbW9kdWxlXG5cdGV4cG9ydHMuU21vb3RoU2Nyb2xsID0gU21vb3RoU2Nyb2xsO1xufShqUXVlcnksIHRoaXMpKTtcbiQoZnVuY3Rpb24oKSB7XG5cdCQoXCIubmF2LW9wZW5lclwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0JChcImJvZHlcIikudG9nZ2xlQ2xhc3MoXCJuYXYtYWN0aXZlXCIpO1xuXHR9KTtcbn0pO1xuJChmdW5jdGlvbigpIHtcbiAgICAvL2NhY2hlcyBhIGpRdWVyeSBvYmplY3QgY29udGFpbmluZyB0aGUgaGVhZGVyIGVsZW1lbnRcbiAgICB2YXIgaGVhZGVyID0gJChcImJvZHlcIik7XG4gICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHNjcm9sbCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcblxuICAgICAgICBpZiAoc2Nyb2xsID4gMCkge1xuICAgICAgICAgICAgaGVhZGVyLmFkZENsYXNzKFwic2Nyb2xsXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaGVhZGVyLnJlbW92ZUNsYXNzKFwic2Nyb2xsXCIpO1xuICAgICAgICB9XG4gICAgfSk7XG59KTsiXX0=
